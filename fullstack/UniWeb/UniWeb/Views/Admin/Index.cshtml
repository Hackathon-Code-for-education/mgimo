@using Microsoft.EntityFrameworkCore
@using UniWeb.Database
@model dynamic

@{
    ViewBag.Title = "title";
    Layout = "Admin/_AdminLayout";
}



<div class="pt-32pt">
    <div class="container page__container d-flex flex-column flex-md-row align-items-center text-center text-sm-left">
        <div class="flex d-flex flex-column flex-sm-row align-items-center mb-24pt mb-md-0">

            <div class="mb-24pt mb-sm-0 mr-sm-24pt">
                <h2 class="mb-0">Панель администратора</h2>
                
            </div>
            
        </div>
    </div>

    <div class="container page__container">
        <div class="page-section">

            <div class="row mb-lg-8pt">
                
                <div class="col-md-6">

                    <div class="page-separator">
                        <div class="page-separator__text">Показатели</div>
                    </div>

                    <div class="card">
                        <div class="card-header p-0 nav">
                            <div class="row no-gutters flex" role="tablist">
                                <div class="col-auto">
                                    <div class="p-card-header d-flex align-items-center">
                                        <div class="h2 mb-0 mr-3">@DatabaseController.GetInstance().Applicants.Count()</div>
                                        <div class="flex">
                                            <p class="card-title">Абитуриентов</p>
                                            <p class="card-subtitle text-50">В системе</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-auto border-left">
                                    <div class="p-card-header d-flex align-items-center">
                                        <div class="h2 mb-0 mr-3">@DatabaseController.GetInstance().Users.Count()</div>
                                        <div class="flex">
                                            <p class="card-title">Всех пользователей</p>
                                            <p class="card-subtitle text-50">Студентов и представителей ВУЗов</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-auto ml-sm-auto">
                                    <div class="p-card-header"><a asp-action="Users" asp-controller="Admin">К пользователям</a></div>
                                </div>
                            </div>
                        </div>
                        
                    </div>

                    <div class="card">
                        <div class="card-header p-0 nav border-0">
                            <div class="row no-gutters flex" role="tablist">
                                <div class="col-auto">
                                    <div class="p-card-header d-flex align-items-center " style="justify-content: space-between">
                                        <div class="h2 mb-0 mr-3">@DatabaseController.GetInstance().Universities.Count()</div>
                                        <div class="flex">
                                            <p class="card-title mb-4pt">Университета в системе</p>
                                            <p class="text-50 mb-0 d-flex align-items-center">
                                                <i class="indicator-line rounded bg-gray"></i>
                                            
                                            </p>
                                            
                                        </div>
                                        
                                    </div>
                                    
                                </div>
                                <div class="col-auto ml-sm-auto">
                                    <div class="p-card-header"><a asp-action="Users" asp-controller="Admin">Все университеты</a></div>
                                </div>
                            </div>
                        </div>
                        
                    </div>

                </div>
            </div>

            <div class="row">
               

                    
                <div class="col-md-6">

                    <div class="page-separator">
                        <div class="page-separator__text">Статистика</div>
                    </div>

                    <p>Количество зарегистрированных пользоваталей за последние 24 часа</p>
                    
                    <div class="row">
                        <div class="col-md-6">

                            <div class="card mb-md-0">
                                <div class="card-header pb-0 border-0 d-flex">
                                    <div class="flex">
                                        <div class="h2 mb-0">@(DatabaseController.GetInstance().Users.Count()+@DatabaseController.GetInstance().Applicants.Count())</div>
                                        <p class="card-title">Кол-во пользователей</p>
                                    </div>
                                    
                                </div>
                                <div class="card-body">
                                    <div class="text-50 mb-16pt">

                                        <div class="mb-4pt">
                                            <p class="d-flex align-items-center mb-0">
                                                <small class="flex lh-24pt">Абитуриенты</small>
                                                <small class="lh-24pt">@DatabaseController.GetInstance().Applicants.Count()</small>
                                            </p>
                                            <div class="progress" style="height: 4px;">
                                                <div class="progress-bar bg-primary" role="progressbar" style="width: @Html.Raw(DatabaseController.GetInstance().Applicants.Count()*1.5)%;" aria-valuenow="53" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </div>

                                        

                                        <div class="mb-4pt">
                                            <p class="d-flex align-items-center mb-0">
                                                <small class="flex lh-24pt">Студентов</small>
                                                <small class="lh-24pt">@DatabaseController.GetInstance().Users.Count(x => x.Role == "Student")</small>
                                            </p>
                                            <div class="progress" style="height: 4px;">
                                                <div class="progress-bar bg-primary" role="progressbar" style="width: @Html.Raw(DatabaseController.GetInstance().Users.Count(x => x.Role == "Student")*1.5)%;" aria-valuenow="9" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </div>

                                        <div>
                                            <p class="d-flex align-items-center mb-0">
                                                <small class="flex lh-24pt">Представителей университета</small>
                                                <small class="lh-24pt">@DatabaseController.GetInstance().Users.Count(x => x.Role == "Representative")</small>
                                            </p>
                                            <div class="progress" style="height: 4px;">
                                                <div class="progress-bar bg-primary" role="progressbar" style="width: @Html.Raw(DatabaseController.GetInstance().Users.Count(x => x.Role == "Representative")*1.5)%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="text-center">
                                        <a href="" class="btn btn-sm btn-outline-secondary">Показать университеты</a>
                                    </div>
                                </div>
                            </div>

                        </div>
                        
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>
